<!-- Header - Apple-inspired Glassmorphism -->
<header class="site-header" role="banner">
  <div class="header-inner">
    <!-- Logo -->
    <a href="/" class="header-logo" aria-label="Premium Car - Ir para a p\u00e1gina inicial">
      <div class="logo-icon">
        <i class="bi bi-car-front-fill" aria-hidden="true"></i>
      </div>
      <span class="logo-text">Premium Car</span>
    </a>

    <!-- Navigation Desktop -->
    <nav class="header-nav" role="navigation" aria-label="Navega\u00e7\u00e3o principal">
      <a href="/" class="nav-link">Home</a>
      <a href="/sobre-nos.html" class="nav-link">Sobre</a>
      <a href="/parcerias.html" class="nav-link">Parcerias</a>
      <a href="/fale-conosco.html" class="nav-link">Contato</a>
    </nav>

    <!-- Actions -->
    <div class="header-actions">
      <!-- Dark Mode Toggle -->
      <button id="themeToggle" class="header-btn" aria-label="Alternar tema" title="Alternar tema">
        <i class="bi bi-moon-fill" aria-hidden="true"></i>
      </button>

      <!-- Favorites -->
      <a href="/favoritos.html" class="header-btn" aria-label="Favoritos" title="Favoritos">
        <i class="bi bi-heart" aria-hidden="true"></i>
      </a>

      <!-- Auth Buttons -->
      <div id="authButtons" class="header-auth"></div>

      <!-- Mobile Menu Button -->
      <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Abrir menu" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </div>
</header>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobileMenu" role="dialog" aria-modal="true" aria-label="Menu de navega\u00e7\u00e3o">
  <div class="mobile-menu-inner">
    <nav class="mobile-nav" role="navigation">
      <a href="/" class="mobile-nav-link">
        <i class="bi bi-house" aria-hidden="true"></i>
        <span>Home</span>
      </a>
      <a href="/sobre-nos.html" class="mobile-nav-link">
        <i class="bi bi-info-circle" aria-hidden="true"></i>
        <span>Sobre N\u00f3s</span>
      </a>
      <a href="/parcerias.html" class="mobile-nav-link">
        <i class="bi bi-handshake" aria-hidden="true"></i>
        <span>Parcerias</span>
      </a>
      <a href="/fale-conosco.html" class="mobile-nav-link">
        <i class="bi bi-envelope" aria-hidden="true"></i>
        <span>Contato</span>
      </a>
      <a href="/favoritos.html" class="mobile-nav-link">
        <i class="bi bi-heart" aria-hidden="true"></i>
        <span>Favoritos</span>
      </a>
    </nav>

    <div class="mobile-menu-divider"></div>

    <!-- Mobile Auth -->
    <div id="mobileAuthButtons" class="mobile-auth"></div>

    <div class="mobile-menu-divider"></div>

    <!-- Theme Toggle -->
    <button class="mobile-theme-toggle" id="mobileThemeToggle">
      <span class="mobile-theme-toggle-label">
        <i class="bi bi-moon-fill" aria-hidden="true"></i>
        <span>Modo Escuro</span>
      </span>
      <div class="toggle-switch"></div>
    </button>
  </div>
</div>

<!-- Footer - Minimal & Elegant -->
<footer class="site-footer" role="contentinfo">
  <div class="footer-main">
    <div class="container">
      <div class="footer-grid">
        <!-- Brand -->
        <div class="footer-brand">
          <div class="footer-logo">
            <div class="footer-logo-icon">
              <i class="bi bi-car-front-fill" aria-hidden="true"></i>
            </div>
            <span class="footer-logo-text">Premium Car</span>
          </div>
          <p class="footer-description">
            Avalia\u00e7\u00f5es automotivas com credibilidade e transpar\u00eancia.
            Ajudamos voc\u00ea a fazer a melhor escolha para seu pr\u00f3ximo ve\u00edculo.
          </p>
          <div class="footer-social">
            <a href="https://www.youtube.com/@PremiumCarAvaliacoes" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="YouTube">
              <i class="bi bi-youtube" aria-hidden="true"></i>
            </a>
            <a href="https://wa.me/5555999837425" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="WhatsApp">
              <i class="bi bi-whatsapp" aria-hidden="true"></i>
            </a>
          </div>
        </div>

        <!-- Quick Links -->
        <div class="footer-section">
          <h4>Links R\u00e1pidos</h4>
          <ul class="footer-links">
            <li><a href="/">Home</a></li>
            <li><a href="/sobre-nos.html">Sobre N\u00f3s</a></li>
            <li><a href="/parcerias.html">Parcerias</a></li>
            <li><a href="/fale-conosco.html">Contato</a></li>
          </ul>
        </div>

        <!-- Resources -->
        <div class="footer-section">
          <h4>Recursos</h4>
          <ul class="footer-links">
            <li><a href="/">Avalia\u00e7\u00f5es</a></li>
            <li><a href="/favoritos.html">Favoritos</a></li>
            <li><a href="https://www.youtube.com/@PremiumCarAvaliacoes" target="_blank">V\u00eddeos</a></li>
          </ul>
        </div>

        <!-- Contact -->
        <div class="footer-section">
          <h4>Contato</h4>
          <div class="footer-contact-item">
            <i class="bi bi-geo-alt" aria-hidden="true"></i>
            <span>Ca\u00e7apava do Sul, RS - Brasil</span>
          </div>
          <div class="footer-contact-item">
            <i class="bi bi-envelope" aria-hidden="true"></i>
            <a href="mailto:goncalvesmarquesmoises@gmail.com">goncalvesmarquesmoises@gmail.com</a>
          </div>
          <div class="footer-contact-item">
            <i class="bi bi-whatsapp" aria-hidden="true"></i>
            <a href="https://wa.me/5555999837425">(55) 99983-7425</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="footer-bottom">
    <div class="container">
      <div class="footer-bottom-inner">
        <p class="footer-copyright">
          2024-2025 <strong>Premium Car</strong>. Todos os direitos reservados.
        </p>
        <div class="footer-credits">
          <i class="bi bi-heart-fill" aria-hidden="true"></i>
          <span>Feito com paix\u00e3o por carros</span>
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
(function() {
  // Theme Toggle
  function initTheme() {
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = savedTheme || (prefersDark ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', theme);
    updateThemeIcon(theme);
  }

  function updateThemeIcon(theme) {
    const icon = theme === 'dark' ? 'bi-sun-fill' : 'bi-moon-fill';
    const themeToggle = document.getElementById('themeToggle');
    const mobileThemeToggle = document.getElementById('mobileThemeToggle');

    if (themeToggle) {
      themeToggle.querySelector('i').className = `bi ${icon}`;
    }
    if (mobileThemeToggle) {
      mobileThemeToggle.querySelector('i').className = `bi ${icon}`;
    }
  }

  function toggleTheme() {
    const current = document.documentElement.getAttribute('data-theme');
    const next = current === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    updateThemeIcon(next);
  }

  // Mobile Menu
  function initMobileMenu() {
    const btn = document.getElementById('mobileMenuBtn');
    const menu = document.getElementById('mobileMenu');

    if (!btn || !menu) return;

    btn.addEventListener('click', () => {
      const isOpen = menu.classList.contains('active');
      btn.classList.toggle('active');
      menu.classList.toggle('active');
      btn.setAttribute('aria-expanded', !isOpen);
      document.body.style.overflow = isOpen ? '' : 'hidden';
    });

    // Close on link click
    menu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        btn.classList.remove('active');
        menu.classList.remove('active');
        btn.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
      });
    });

    // Close on escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && menu.classList.contains('active')) {
        btn.classList.remove('active');
        menu.classList.remove('active');
        btn.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
      }
    });
  }

  // Header Scroll Effect
  function initScrollEffect() {
    const header = document.querySelector('.site-header');
    if (!header) return;

    let lastScroll = 0;

    window.addEventListener('scroll', () => {
      const currentScroll = window.pageYOffset;

      if (currentScroll > 10) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }

      lastScroll = currentScroll;
    }, { passive: true });
  }

  // Auth UI
  function updateAuthUI() {
    const token = localStorage.getItem('token');
    const authButtons = document.getElementById('authButtons');
    const mobileAuthButtons = document.getElementById('mobileAuthButtons');

    if (token) {
      // Logged in
      if (authButtons) {
        authButtons.innerHTML = `
          <a href="/src/admin/painel.html" class="btn btn-sm btn-primary">Admin</a>
        `;
      }
      if (mobileAuthButtons) {
        mobileAuthButtons.innerHTML = `
          <a href="/src/admin/painel.html" class="mobile-nav-link">
            <i class="bi bi-speedometer2"></i>
            <span>Painel Admin</span>
          </a>
          <button onclick="handleLogout()" class="mobile-nav-link" style="width: 100%; border: none; background: none; cursor: pointer;">
            <i class="bi bi-box-arrow-right"></i>
            <span>Sair</span>
          </button>
        `;
      }
    } else {
      // Logged out
      if (authButtons) {
        authButtons.innerHTML = `
          <a href="/login.html" class="btn btn-sm btn-ghost">Login</a>
        `;
      }
      if (mobileAuthButtons) {
        mobileAuthButtons.innerHTML = `
          <a href="/login.html" class="mobile-nav-link">
            <i class="bi bi-box-arrow-in-right"></i>
            <span>Login Admin</span>
          </a>
        `;
      }
    }
  }

  // Active Nav Link
  function setActiveNavLink() {
    const currentPath = window.location.pathname;
    document.querySelectorAll('.nav-link, .mobile-nav-link').forEach(link => {
      const href = link.getAttribute('href');
      if (href === currentPath || (href === '/' && currentPath === '/index.html')) {
        link.classList.add('active');
      }
    });
  }

  // Initialize
  function init() {
    initTheme();
    initMobileMenu();
    initScrollEffect();
    updateAuthUI();
    setActiveNavLink();

    // Theme toggle listeners
    document.getElementById('themeToggle')?.addEventListener('click', toggleTheme);
    document.getElementById('mobileThemeToggle')?.addEventListener('click', toggleTheme);
  }

  // Run init when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

  // Expose logout function globally
  window.handleLogout = function() {
    if (confirm('Deseja realmente sair?')) {
      localStorage.removeItem('token');
      window.location.href = '/login.html';
    }
  };
})();
</script>
