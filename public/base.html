<!-- ==========================================
     PREMIUM CAR - HEADER
     Modern & Professional Design
     ========================================== -->
<header class="site-header" id="siteHeader" role="banner">
  <div class="header-inner">
    <!-- Logo -->
    <a href="/" class="header-logo" aria-label="Premium Car - Pagina inicial">
      <div class="logo-icon">
        <i class="bi bi-car-front-fill" aria-hidden="true"></i>
      </div>
      <span class="logo-text">Premium Car</span>
    </a>

    <!-- Desktop Navigation -->
    <nav class="header-nav" role="navigation" aria-label="Navegacao principal">
      <a href="/" class="nav-link" data-page="home">
        <i class="bi bi-house"></i>
        <span>Inicio</span>
      </a>
      <a href="/sobre-nos.html" class="nav-link" data-page="sobre">
        <i class="bi bi-info-circle"></i>
        <span>Sobre</span>
      </a>
      <a href="/parcerias.html" class="nav-link" data-page="parcerias">
        <i class="bi bi-handshake"></i>
        <span>Parcerias</span>
      </a>
      <a href="/fale-conosco.html" class="nav-link" data-page="contato">
        <i class="bi bi-envelope"></i>
        <span>Contato</span>
      </a>
    </nav>

    <!-- Header Actions -->
    <div class="header-actions">
      <!-- Favorites -->
      <a href="/favoritos.html" class="header-btn" title="Meus Favoritos" id="favoritesBtn" aria-label="Favoritos">
        <i class="bi bi-heart" aria-hidden="true"></i>
        <span class="favorites-badge d-none" id="favoritesBadge">0</span>
      </a>

      <!-- Theme Toggle -->
      <button id="themeToggle" class="header-btn" aria-label="Alternar tema" title="Alternar tema">
        <i class="bi bi-moon" aria-hidden="true"></i>
      </button>

      <!-- Auth Buttons -->
      <div id="authButtons" class="header-auth"></div>

      <!-- Mobile Menu Button -->
      <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Abrir menu" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </div>
</header>

<!-- ==========================================
     MOBILE MENU
     ========================================== -->
<div class="mobile-menu" id="mobileMenu" role="dialog" aria-modal="true" aria-label="Menu de navegacao">
  <div class="mobile-menu-inner">
    <nav class="mobile-nav" role="navigation">
      <a href="/" class="mobile-nav-link" data-page="home">
        <i class="bi bi-house" aria-hidden="true"></i>
        <span>Inicio</span>
      </a>
      <a href="/sobre-nos.html" class="mobile-nav-link" data-page="sobre">
        <i class="bi bi-info-circle" aria-hidden="true"></i>
        <span>Sobre Nos</span>
      </a>
      <a href="/parcerias.html" class="mobile-nav-link" data-page="parcerias">
        <i class="bi bi-handshake" aria-hidden="true"></i>
        <span>Parcerias</span>
      </a>
      <a href="/fale-conosco.html" class="mobile-nav-link" data-page="contato">
        <i class="bi bi-envelope" aria-hidden="true"></i>
        <span>Fale Conosco</span>
      </a>
      <a href="/favoritos.html" class="mobile-nav-link" data-page="favoritos">
        <i class="bi bi-heart" aria-hidden="true"></i>
        <span>Meus Favoritos</span>
      </a>
    </nav>

    <div class="mobile-menu-divider"></div>

    <!-- Mobile Auth -->
    <div id="mobileAuthButtons" class="mobile-auth"></div>

    <div class="mobile-menu-divider"></div>

    <!-- Theme Toggle -->
    <button class="mobile-theme-toggle" id="mobileThemeToggle">
      <span class="mobile-theme-toggle-label">
        <i class="bi bi-moon" aria-hidden="true"></i>
        <span>Modo Escuro</span>
      </span>
      <div class="toggle-switch"></div>
    </button>
  </div>
</div>

<!-- ==========================================
     PREMIUM CAR - FOOTER
     Modern & Clean Design
     ========================================== -->
<footer class="site-footer" role="contentinfo">
  <div class="footer-main">
    <div class="container">
      <div class="footer-grid">
        <!-- Brand Section -->
        <div class="footer-brand">
          <div class="footer-logo">
            <div class="footer-logo-icon">
              <i class="bi bi-car-front-fill" aria-hidden="true"></i>
            </div>
            <span class="footer-logo-text">Premium Car</span>
          </div>
          <p class="footer-description">
            Sua fonte definitiva de avaliacoes e reviews de carros premium.
            Conteudo de qualidade para ajudar na sua decisao.
          </p>
          <div class="footer-social">
            <a href="https://www.youtube.com/@PremiumCarAvaliacoes" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="YouTube">
              <i class="bi bi-youtube" aria-hidden="true"></i>
            </a>
            <a href="https://wa.me/5555999837425" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="WhatsApp">
              <i class="bi bi-whatsapp" aria-hidden="true"></i>
            </a>
            <a href="https://instagram.com/premiumcar" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Instagram">
              <i class="bi bi-instagram" aria-hidden="true"></i>
            </a>
          </div>
        </div>

        <!-- Links Rapidos -->
        <div class="footer-section">
          <h4>Links Rapidos</h4>
          <ul class="footer-links">
            <li><a href="/">Inicio</a></li>
            <li><a href="/sobre-nos.html">Sobre Nos</a></li>
            <li><a href="/parcerias.html">Parcerias</a></li>
            <li><a href="/fale-conosco.html">Contato</a></li>
          </ul>
        </div>

        <!-- Recursos -->
        <div class="footer-section">
          <h4>Recursos</h4>
          <ul class="footer-links">
            <li><a href="/">Reviews de Carros</a></li>
            <li><a href="/favoritos.html">Meus Favoritos</a></li>
            <li><a href="https://www.youtube.com/@PremiumCarAvaliacoes" target="_blank">Videos</a></li>
          </ul>
        </div>

        <!-- Contato -->
        <div class="footer-section">
          <h4>Contato</h4>
          <div class="footer-contact-item">
            <i class="bi bi-geo-alt" aria-hidden="true"></i>
            <span>Cacapava do Sul, RS<br>Brasil</span>
          </div>
          <div class="footer-contact-item">
            <i class="bi bi-envelope" aria-hidden="true"></i>
            <a href="mailto:goncalvesmarquesmoises@gmail.com">goncalvesmarquesmoises@gmail.com</a>
          </div>
          <div class="footer-contact-item">
            <i class="bi bi-whatsapp" aria-hidden="true"></i>
            <a href="https://wa.me/5555999837425">(55) 99983-7425</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="footer-bottom">
    <div class="container">
      <div class="footer-bottom-inner">
        <p class="footer-copyright">
          2024-2025 <strong>Premium Car</strong>. Todos os direitos reservados.
        </p>
        <div class="footer-credits">
          <span>Feito com</span>
          <i class="bi bi-heart-fill" aria-hidden="true"></i>
          <span>no Brasil</span>
        </div>
      </div>
    </div>
  </div>
</footer>

<!-- ==========================================
     HEADER/FOOTER SCRIPTS
     ========================================== -->
<script>
(function() {
  // Theme Toggle
  function initTheme() {
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = savedTheme || (prefersDark ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', theme);
    updateThemeIcon(theme);
  }

  function updateThemeIcon(theme) {
    const icon = theme === 'dark' ? 'bi-sun' : 'bi-moon';
    const label = theme === 'dark' ? 'Modo Claro' : 'Modo Escuro';
    const themeToggle = document.getElementById('themeToggle');
    const mobileThemeToggle = document.getElementById('mobileThemeToggle');

    if (themeToggle) {
      themeToggle.innerHTML = `<i class="bi ${icon}" aria-hidden="true"></i>`;
    }
    if (mobileThemeToggle) {
      mobileThemeToggle.querySelector('.mobile-theme-toggle-label').innerHTML = `
        <i class="bi ${icon}" aria-hidden="true"></i>
        <span>${label}</span>
      `;
    }
  }

  function toggleTheme() {
    const current = document.documentElement.getAttribute('data-theme');
    const next = current === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    updateThemeIcon(next);
  }

  // Mobile Menu
  function initMobileMenu() {
    const btn = document.getElementById('mobileMenuBtn');
    const menu = document.getElementById('mobileMenu');

    if (!btn || !menu) return;

    btn.addEventListener('click', () => {
      const isOpen = menu.classList.contains('active');
      btn.classList.toggle('active');
      menu.classList.toggle('active');
      btn.setAttribute('aria-expanded', !isOpen);
      document.body.style.overflow = isOpen ? '' : 'hidden';
    });

    // Close on link click
    menu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        btn.classList.remove('active');
        menu.classList.remove('active');
        btn.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
      });
    });

    // Close on escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && menu.classList.contains('active')) {
        btn.classList.remove('active');
        menu.classList.remove('active');
        btn.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
      }
    });
  }

  // Header Scroll Effect
  function initScrollEffect() {
    const header = document.querySelector('.site-header');
    if (!header) return;

    window.addEventListener('scroll', () => {
      if (window.pageYOffset > 20) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    }, { passive: true });
  }

  // Auth UI
  function updateAuthUI() {
    const token = localStorage.getItem('token');
    const authButtons = document.getElementById('authButtons');
    const mobileAuthButtons = document.getElementById('mobileAuthButtons');

    if (token) {
      // Logged in
      if (authButtons) {
        authButtons.innerHTML = `
          <a href="/admin" class="btn btn-sm btn-primary">
            <i class="bi bi-speedometer2"></i>
            <span class="d-none d-md-inline ms-1">Painel</span>
          </a>
        `;
      }
      if (mobileAuthButtons) {
        mobileAuthButtons.innerHTML = `
          <a href="/admin" class="mobile-nav-link">
            <i class="bi bi-speedometer2" aria-hidden="true"></i>
            <span>Painel Admin</span>
          </a>
          <button onclick="handleLogout()" class="mobile-nav-link" style="width: 100%; border: none; background: none; cursor: pointer; text-align: left;">
            <i class="bi bi-box-arrow-right" aria-hidden="true"></i>
            <span>Sair</span>
          </button>
        `;
      }
    } else {
      // Logged out
      if (authButtons) {
        authButtons.innerHTML = `
          <a href="/login.html" class="btn btn-sm btn-ghost">
            <i class="bi bi-box-arrow-in-right"></i>
            <span class="d-none d-md-inline ms-1">Entrar</span>
          </a>
        `;
      }
      if (mobileAuthButtons) {
        mobileAuthButtons.innerHTML = `
          <a href="/login.html" class="mobile-nav-link">
            <i class="bi bi-box-arrow-in-right" aria-hidden="true"></i>
            <span>Entrar</span>
          </a>
          <a href="/register.html" class="mobile-nav-link">
            <i class="bi bi-person-plus" aria-hidden="true"></i>
            <span>Criar Conta</span>
          </a>
        `;
      }
    }
  }

  // Active Nav Link
  function setActiveNavLink() {
    const currentPath = window.location.pathname;
    document.querySelectorAll('.nav-link, .mobile-nav-link').forEach(link => {
      link.classList.remove('active');
      const href = link.getAttribute('href');
      if (href === currentPath ||
          (href === '/' && (currentPath === '/index.html' || currentPath === '/')) ||
          (currentPath.includes(href) && href !== '/' && href !== '#')) {
        link.classList.add('active');
      }
    });
  }

  // Favorites Badge
  function updateFavoritesBadge() {
    const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
    const badge = document.getElementById('favoritesBadge');
    const btn = document.getElementById('favoritesBtn');

    if (badge && btn) {
      if (favorites.length > 0) {
        badge.textContent = favorites.length > 9 ? '9+' : favorites.length;
        badge.classList.remove('d-none');
        btn.querySelector('i').className = 'bi bi-heart-fill';
        btn.querySelector('i').style.color = 'var(--color-accent-500)';
      } else {
        badge.classList.add('d-none');
        btn.querySelector('i').className = 'bi bi-heart';
        btn.querySelector('i').style.color = '';
      }
    }
  }

  // Initialize
  function init() {
    initTheme();
    initMobileMenu();
    initScrollEffect();
    updateAuthUI();
    setActiveNavLink();
    updateFavoritesBadge();

    // Theme toggle listeners
    document.getElementById('themeToggle')?.addEventListener('click', toggleTheme);
    document.getElementById('mobileThemeToggle')?.addEventListener('click', toggleTheme);

    // Listen for favorites changes
    window.addEventListener('storage', (e) => {
      if (e.key === 'favorites') updateFavoritesBadge();
    });
    window.addEventListener('favoritesUpdated', updateFavoritesBadge);
  }

  // Run init when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

  // Expose logout function globally
  window.handleLogout = function() {
    if (confirm('Deseja realmente sair?')) {
      localStorage.removeItem('token');
      window.location.href = '/login.html';
    }
  };
})();
</script>

<style>
/* Favorites Badge */
.favorites-badge {
  position: absolute;
  top: 2px;
  right: 2px;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  font-size: 10px;
  font-weight: 700;
  color: white;
  background: var(--color-accent-600);
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}

#favoritesBtn {
  position: relative;
}

.d-md-inline {
  display: none !important;
}

@media (min-width: 768px) {
  .d-md-inline {
    display: inline !important;
  }
}

.ms-1 {
  margin-left: 0.25rem;
}
</style>
